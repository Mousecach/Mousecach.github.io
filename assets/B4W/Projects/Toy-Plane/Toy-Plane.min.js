var h=[],l=[],p=[],q,r=!1,t=[!0,!0,!0],y=new function(){function a(){k+=d;1>=k?setTimeout(a,20):(e=!e,u(!0),r=!0,w(!1));x(f,g,Math.max(Math.min(k,1),0),"CockpitBone")}var b=[0,0,0,1,0,0,0,1],c=[0,0,0,1,-.383,0,0,.924],f,g,d=0,k=0,e=!1;this.Audio=$("#CocpitAudio").get(0);this.c=function(){k=0;d=.02;e?(f=c,g=b):(f=b,g=c);x(f,g,k,"CockpitBone");setTimeout(a,20);u(!1);r=!1;w(!0)}},D=new function(){function a(){switch(m){case 0:d=Math.max(d-4,50);break;case 1:d=Math.min(d+4,1E3)}k=1/(d/20);e+=k;n=50/d;
1<=e&&(e=0,c++,5==c&&(c=1),f=b[c-1],g=b[c]);1!==m||1E3!==d||0!==e||1!==c?setTimeout(a,20):z("stop");x(f,g,Math.max(Math.min(e,1),0),"AirplaneScewBone");z("speed",n)}var b=[[0,0,0,1,0,0,0,1],[0,0,0,1,0,-.707,0,.707],[0,0,0,1,0,-1,0,0],[0,0,0,1,0,-.707,0,-.707],[0,0,0,1,0,0,0,1]],c=1,f,g,d=1E3,k=1/(d/20),e=0,m=1,n;this.Audio;this.f=function(){e=0;switch(m){case 0:m=1;break;case 1:m=0,f||g||(f=b[0],g=b[1]),x(f,g,e,"AirplaneScewBone"),setTimeout(a,20),z("play")}}},E,F,G,x;
$(document).ready(function(){var a=0;h[a++]=$("#AnimButton_AirplaneScrew");h[a++]=$("#AnimButton_Cockpit");a=0;p[a++]=$("#MenuAnimationButton");p[a++]=$("#MenuLampButton");p[a++]=$("#InfoButton");a=0;l[a++]=$("#LampButton_White");l[a++]=$("#LampButton_Red");l[a++]=$("#LampButton_Blue");q=$("#InfoBlock");E=$("#CocpitAudio").get(0);F=$("#PropellerAudio").get(0);F.volume=0;K();L();M();N($("#MenuAnimationButton"),h,r);N($("#MenuLampButton"),l,!1);O()});
function M(){$("#AnimButton_Cockpit").click(function(){y.c()});$("#AnimButton_AirplaneScrew").click(function(){D.f()})}function N(a,b,c){a.click(function(){c?b.forEach(function(a){a.hide(300)}):b.forEach(function(a){a.show(300)});c=!c})}function O(){var a=$("#InfoButton"),b=q,c=!1;a.click(function(){c?b.hide(300):b.show(300);c=!c})}function w(a){a?E.play():(E.pause(),E.currentTime=0)}
function z(a,b){switch(a){case "speed":b!=F.volume&&(F.volume=b,F.playbackRate=b+.75);break;case "play":F.play();break;case "stop":F.pause(),F.currentTime=0}}function u(a){a?h.forEach(function(a){a.show(300)}):h.forEach(function(a){a.hide(300)})}function K(){h.forEach(function(a){a.hide()});p.forEach(function(a){a.hide()});l.forEach(function(a){a.hide()});q.hide()}
function L(){function a(a,c){l[a].click(function(){G(a,t[a]);t[a]?(l[a].removeClass("BGLampActive"+c),l[a].addClass("BGLampDisable"+c)):(l[a].removeClass("BGLampDisable"+c),l[a].addClass("BGLampActive"+c));t[a]=!t[a]})}a(0,"");a(1,"Red");a(2,"Blue")}
b4w.register("Toy-Plane_main",function(a,b){function c(a,b){b?(A=document.getElementById("PreloaderContainer"),A.style.visibility="visible",a.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1},e.load(Q+"Toy-Plane.json",g,f)):console.log("b4w init failure")}function f(a){document.getElementById("PersentNumeric").innerHTML=a+"%";100==a&&(A.style.visibility="hidden")}function g(a,b){b?(d.enable_camera_controls(),H(),v=n.get_lamps("SUN"),I=R.get_object_by_name("Armature")):console.log("b4w load failure")}
var d=b("app"),k=b("config"),e=b("data"),m=b("version"),n=b("lights"),B=b("tsr"),S=b("armature"),R=b("scenes"),C="DEBUG"==m.type(),Q=C?k.get_assets_path("Toy-Plane"):"/assets/B4W/Projects/Toy-Plane/assets/",H,v,I,J=new Float32Array(8),A;a.init=function(){d.init({canvas_container_id:"main_canvas_container",callback:c,show_fps:C,console_verbose:C,autoresize:!0})};a.g=function(a){H=a};a.a=function(a,b){switch(a){case 0:n.set_light_energy(v[2],b?0:1);break;case 1:n.set_light_energy(v[1],b?0:1);break;
case 2:n.set_light_energy(v[0],b?0:1)}};a.b=function(a,b,c,d){a=B.from_values(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]);b=B.from_values(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);B.interpolate(a,b,c,J);S.set_bone_tsr_rel(I,d,J)}});var P=b4w.require("Toy-Plane_main");P.g(function(){p.forEach(function(a){a.show(500)})});P.init();G=P.a;x=P.b;
